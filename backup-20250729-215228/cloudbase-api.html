<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CloudBase API ç›´æ¥è°ƒç”¨</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        .api-section {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .result {
            background: rgba(0,0,0,0.3);
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            white-space: pre-wrap;
            font-family: monospace;
            max-height: 300px;
            overflow-y: auto;
        }
        .error {
            background: rgba(220,53,69,0.3);
        }
        .success {
            background: rgba(40,167,69,0.3);
        }
        .info {
            background: rgba(23,162,184,0.3);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ CloudBase API ç›´æ¥è°ƒç”¨</h1>
        
        <div class="info">
            <h3>ğŸ“‹ è¯´æ˜</h3>
            <p>ç”±äºCloudBaseçš„HTTPè§¦å‘å™¨é…ç½®é™åˆ¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹æ–¹æ¡ˆï¼š</p>
            <ul>
                <li>âœ… å‡½æ•°å·²éƒ¨ç½²å¹¶æ­£å¸¸å·¥ä½œ</li>
                <li>âœ… å¯ä»¥é€šè¿‡CLIç›´æ¥è°ƒç”¨</li>
                <li>âœ… å‰ç«¯é¡µé¢å¯ä»¥æ­£å¸¸æ˜¾ç¤º</li>
                <li>âš ï¸ éœ€è¦æ‰‹åŠ¨é…ç½®HTTPè§¦å‘å™¨æˆ–ä½¿ç”¨å…¶ä»–æ–¹æ¡ˆ</li>
            </ul>
        </div>
        
        <div class="api-section">
            <h3>ğŸ“‹ å¥åº·æ£€æŸ¥</h3>
            <button onclick="testHealth()">æµ‹è¯•å¥åº·æ£€æŸ¥</button>
            <div id="health-result" class="result"></div>
        </div>
        
        <div class="api-section">
            <h3>ğŸ’° æˆæœ¬ç»Ÿè®¡</h3>
            <button onclick="testCostStats()">æµ‹è¯•æˆæœ¬ç»Ÿè®¡</button>
            <div id="cost-result" class="result"></div>
        </div>
        
        <div class="api-section">
            <h3>ğŸ¤– AIèŠå¤©</h3>
            <button onclick="testAIChat()">æµ‹è¯•AIèŠå¤©</button>
            <div id="chat-result" class="result"></div>
        </div>
        
        <div class="api-section">
            <h3>ğŸ“š æ‹›ç”Ÿå»ºè®®</h3>
            <button onclick="testAdmissionAdvice()">æµ‹è¯•æ‹›ç”Ÿå»ºè®®</button>
            <div id="advice-result" class="result"></div>
        </div>
        
        <div class="api-section">
            <h3>ğŸ” å‡½æ•°çŠ¶æ€</h3>
            <button onclick="testFunctionStatus()">æ£€æŸ¥å‡½æ•°çŠ¶æ€</button>
            <div id="status-result" class="result"></div>
        </div>
        
        <div class="api-section">
            <h3>ğŸ“ è§£å†³æ–¹æ¡ˆ</h3>
            <div class="info">
                <h4>æ–¹æ¡ˆ1: æ‰‹åŠ¨é…ç½®HTTPè§¦å‘å™¨</h4>
                <p>åœ¨CloudBaseæ§åˆ¶å°ä¸­æ‰‹åŠ¨é…ç½®HTTPè§¦å‘å™¨ï¼Œå¯èƒ½éœ€è¦è”ç³»æŠ€æœ¯æ”¯æŒã€‚</p>
                
                <h4>æ–¹æ¡ˆ2: ä½¿ç”¨å…¶ä»–äº‘æœåŠ¡</h4>
                <p>è€ƒè™‘ä½¿ç”¨è…¾è®¯äº‘çš„å…¶ä»–æœåŠ¡ï¼Œå¦‚äº‘å‡½æ•°SCFç›´æ¥é…ç½®HTTPè§¦å‘å™¨ã€‚</p>
                
                <h4>æ–¹æ¡ˆ3: ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨</h4>
                <p>å°†å‡½æ•°éƒ¨ç½²åˆ°æœ¬åœ°æœåŠ¡å™¨æˆ–VPSä¸Šï¼Œé€šè¿‡HTTPç›´æ¥è®¿é—®ã€‚</p>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸAPIè°ƒç”¨ï¼ˆå®é™…æƒ…å†µä¸‹éœ€è¦åç«¯æ”¯æŒï¼‰
        async function testHealth() {
            const resultDiv = document.getElementById('health-result');
            resultDiv.textContent = 'æµ‹è¯•ä¸­...';
            resultDiv.className = 'result';
            
            try {
                // æ¨¡æ‹ŸæˆåŠŸå“åº”
                const mockResponse = {
                    success: true,
                    message: 'CloudBaseå‡½æ•°æ­£å¸¸è¿è¡Œ',
                    timestamp: new Date().toISOString(),
                    environment: 'cloudbase',
                    function: 'api-simple',
                    note: 'è¿™æ˜¯æ¨¡æ‹Ÿå“åº”ï¼Œå®é™…éœ€è¦é…ç½®HTTPè§¦å‘å™¨'
                };
                
                resultDiv.textContent = JSON.stringify(mockResponse, null, 2);
                resultDiv.className = 'result success';
            } catch (error) {
                resultDiv.textContent = `é”™è¯¯: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }
        
        async function testCostStats() {
            const resultDiv = document.getElementById('cost-result');
            resultDiv.textContent = 'æµ‹è¯•ä¸­...';
            resultDiv.className = 'result';
            
            try {
                const mockResponse = {
                    success: true,
                    total_cost: 0,
                    total_calls: 5,
                    api_types: {
                        'health-check': { calls: 2, cost: 0 },
                        'ai-chat': { calls: 2, cost: 0 },
                        'advice-generation': { calls: 1, cost: 0 }
                    },
                    message: 'ç»Ÿè®¡å®Œæˆï¼Œå…±5æ¬¡è°ƒç”¨ï¼Œæ€»æˆæœ¬Â¥0.00',
                    note: 'è¿™æ˜¯æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…éœ€è¦é…ç½®HTTPè§¦å‘å™¨'
                };
                
                resultDiv.textContent = JSON.stringify(mockResponse, null, 2);
                resultDiv.className = 'result success';
            } catch (error) {
                resultDiv.textContent = `é”™è¯¯: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }
        
        async function testAIChat() {
            const resultDiv = document.getElementById('chat-result');
            resultDiv.textContent = 'æµ‹è¯•ä¸­...';
            resultDiv.className = 'result';
            
            try {
                const mockResponse = {
                    success: true,
                    message: 'æ„Ÿè°¢æ‚¨çš„å’¨è¯¢ï¼æˆ‘æ˜¯ä¸“ä¸šçš„æ‹›ç”Ÿé¡¾é—®AIåŠ©æ‰‹ï¼Œå¯ä»¥ä¸ºæ‚¨æä¾›ç•™å­¦ç”³è¯·ã€èŒä¸šè§„åˆ’ã€ç®€å†ä¼˜åŒ–ç­‰æœåŠ¡ã€‚æ‚¨è¯¢é—®çš„æ˜¯ï¼šæµ‹è¯•æ¶ˆæ¯',
                    model: 'kimi-simulated',
                    timestamp: new Date().toISOString(),
                    note: 'è¿™æ˜¯æ¨¡æ‹Ÿå“åº”ï¼Œå®é™…éœ€è¦é…ç½®HTTPè§¦å‘å™¨'
                };
                
                resultDiv.textContent = JSON.stringify(mockResponse, null, 2);
                resultDiv.className = 'result success';
            } catch (error) {
                resultDiv.textContent = `é”™è¯¯: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }
        
        async function testAdmissionAdvice() {
            const resultDiv = document.getElementById('advice-result');
            resultDiv.textContent = 'æµ‹è¯•ä¸­...';
            resultDiv.className = 'result';
            
            try {
                const mockResponse = {
                    success: true,
                    message: 'ä½œä¸ºä¸“ä¸šçš„æ‹›ç”Ÿé¡¾é—®ï¼Œæˆ‘å»ºè®®æ‚¨ï¼š\n\n1. å­¦æœ¯å‡†å¤‡\n2. ç”³è¯·ææ–™\n3. æ—¶é—´è§„åˆ’\n4. é€‰æ ¡ç­–ç•¥\n\nç¥æ‚¨ç”³è¯·æˆåŠŸï¼',
                    timestamp: new Date().toISOString(),
                    note: 'è¿™æ˜¯æ¨¡æ‹Ÿå“åº”ï¼Œå®é™…éœ€è¦é…ç½®HTTPè§¦å‘å™¨'
                };
                
                resultDiv.textContent = JSON.stringify(mockResponse, null, 2);
                resultDiv.className = 'result success';
            } catch (error) {
                resultDiv.textContent = `é”™è¯¯: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }
        
        async function testFunctionStatus() {
            const resultDiv = document.getElementById('status-result');
            resultDiv.textContent = 'æ£€æŸ¥ä¸­...';
            resultDiv.className = 'result';
            
            try {
                const mockResponse = {
                    function_name: 'api',
                    function_id: 'lam-ccq8f9ez',
                    status: 'éƒ¨ç½²å®Œæˆ',
                    runtime: 'Nodejs16.13',
                    memory: '256MB',
                    timeout: '10ç§’',
                    last_modified: '2025-07-26 15:49:57',
                    note: 'å‡½æ•°å·²éƒ¨ç½²ï¼Œä½†éœ€è¦é…ç½®HTTPè§¦å‘å™¨æ‰èƒ½é€šè¿‡HTTPè®¿é—®',
                    next_steps: [
                        '1. è”ç³»CloudBaseæŠ€æœ¯æ”¯æŒé…ç½®HTTPè§¦å‘å™¨',
                        '2. æˆ–ä½¿ç”¨è…¾è®¯äº‘SCFæœåŠ¡',
                        '3. æˆ–éƒ¨ç½²åˆ°æœ¬åœ°æœåŠ¡å™¨'
                    ]
                };
                
                resultDiv.textContent = JSON.stringify(mockResponse, null, 2);
                resultDiv.className = 'result info';
            } catch (error) {
                resultDiv.textContent = `é”™è¯¯: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }
    </script>
</body>
</html> 