# RAGç³»ç»Ÿéƒ¨ç½²æ€»ç»“

## ğŸ‰ éƒ¨ç½²å®Œæˆï¼

ä½ çš„RAGç³»ç»Ÿå·²ç»å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šäº†ã€‚

## ğŸ“¦ éƒ¨ç½²åŒ…ä¿¡æ¯

### å·²å‡†å¤‡çš„éƒ¨ç½²åŒ…
- **ä½ç½®**: `rag-deploy/` ç›®å½•
- **åŒ…å«æ–‡ä»¶**:
  - `server/` - RAGç³»ç»ŸæœåŠ¡å™¨ä»£ç 
  - `public/` - å‰ç«¯ç®¡ç†ç•Œé¢
  - `install-database.sh` - æ•°æ®åº“å®‰è£…è„šæœ¬
  - `start.sh` - å¯åŠ¨è„šæœ¬
  - `test-database-sync.js` - æµ‹è¯•è„šæœ¬

### é…ç½®ä¿¡æ¯
- **Kimi API Key**: `sk-ES7OyFh1ZQtdSpDK46yanZP1VP1qxRcb1QYmg2jbSugPBRlP` âœ… å·²é…ç½®
- **æœåŠ¡å™¨IP**: `124.222.117.47`
- **æœåŠ¡ç«¯å£**: `3000`

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1ï¼šä¸Šä¼ åˆ°æœåŠ¡å™¨
```bash
# åœ¨æœ¬åœ°æ‰§è¡Œ
scp -r rag-deploy ubuntu@124.222.117.47:~/
```

### æ­¥éª¤2ï¼šåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²
```bash
# è¿æ¥åˆ°æœåŠ¡å™¨
ssh ubuntu@124.222.117.47

# è¿›å…¥éƒ¨ç½²ç›®å½•
cd ~/rag-deploy

# å®‰è£…æ•°æ®åº“
chmod +x install-database.sh
./install-database.sh

# å¯åŠ¨RAGç³»ç»Ÿ
chmod +x start.sh
./start.sh
```

### æ­¥éª¤3ï¼šéªŒè¯éƒ¨ç½²
```bash
# å¥åº·æ£€æŸ¥
curl http://124.222.117.47:3000/health

# RAG APIæ£€æŸ¥
curl http://124.222.117.47:3000/api/rag/health
```

## ğŸŒ è®¿é—®åœ°å€

éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

- **å¥åº·æ£€æŸ¥**: http://124.222.117.47:3000/health
- **RAGç®¡ç†ç•Œé¢**: http://124.222.117.47:3000/public/rag-admin-enhanced.html
- **APIæ–‡æ¡£**: http://124.222.117.47:3000/api/rag/health

## ğŸ”§ ç³»ç»ŸåŠŸèƒ½

### å·²å®ç°åŠŸèƒ½
1. **æ–‡æ¡£ç®¡ç†**
   - æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼ä¸Šä¼ ï¼ˆPDFã€Wordã€TXTã€å›¾ç‰‡ç­‰ï¼‰
   - æ–‡æ¡£åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†
   - æ–‡æ¡£åˆ é™¤å’Œæ›´æ–°

2. **æ™ºèƒ½æœç´¢**
   - åŸºäºå†…å®¹çš„æ–‡æœ¬æœç´¢
   - ç›¸å…³æ€§æ’åº
   - æœç´¢ç»“æœé¢„è§ˆ

3. **AIå¢å¼º**
   - Kimi APIé›†æˆ
   - æ™ºèƒ½æ–‡æ¡£è§£æ
   - AIé©±åŠ¨çš„æœç´¢å¢å¼º

4. **æ•°æ®åº“é›†æˆ**
   - MongoDBæ–‡æ¡£å­˜å‚¨
   - Redisç¼“å­˜æ”¯æŒ
   - æ•°æ®æŒä¹…åŒ–

5. **APIæ¥å£**
   - RESTful APIè®¾è®¡
   - å®Œæ•´çš„CRUDæ“ä½œ
   - å¥åº·æ£€æŸ¥å’Œç›‘æ§

### APIæ¥å£åˆ—è¡¨
- `GET /health` - ç³»ç»Ÿå¥åº·æ£€æŸ¥
- `GET /api/rag/health` - RAGç³»ç»ŸçŠ¶æ€
- `GET /api/rag/stats` - ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯
- `GET /api/rag/documents` - è·å–æ–‡æ¡£åˆ—è¡¨
- `POST /api/rag/upload/local` - ä¸Šä¼ æœ¬åœ°æ–‡ä»¶
- `POST /api/rag/search` - æœç´¢æ–‡æ¡£
- `DELETE /api/rag/documents/:id` - åˆ é™¤æ–‡æ¡£

## ğŸ“Š ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs rag-system

# é‡å¯æœåŠ¡
pm2 restart rag-system

# åœæ­¢æœåŠ¡
pm2 stop rag-system

# åˆ é™¤æœåŠ¡
pm2 delete rag-system
```

## ğŸ§ª æµ‹è¯•ç¤ºä¾‹

### ä¸Šä¼ æ–‡æ¡£
```bash
curl -X POST -F "file=@document.pdf" -F "category=resume" -F "tags=resume,job" http://124.222.117.47:3000/api/rag/upload/local
```

### æœç´¢æ–‡æ¡£
```bash
curl -X POST -H "Content-Type: application/json" -d '{"query":"ç®€å†ä¼˜åŒ–"}' http://124.222.117.47:3000/api/rag/search
```

### è·å–æ–‡æ¡£åˆ—è¡¨
```bash
curl http://124.222.117.47:3000/api/rag/documents
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æœåŠ¡æ— æ³•å¯åŠ¨**
   - æ£€æŸ¥ç«¯å£å ç”¨ï¼š`sudo lsof -i :3000`
   - æŸ¥çœ‹æ—¥å¿—ï¼š`pm2 logs rag-system`

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥MongoDBï¼š`sudo systemctl status mongod`
   - æ£€æŸ¥Redisï¼š`sudo systemctl status redis-server`

3. **æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥ç›®å½•æƒé™ï¼š`sudo chmod 755 server/uploads`
   - æ£€æŸ¥ç£ç›˜ç©ºé—´ï¼š`df -h`

### æ—¥å¿—æŸ¥çœ‹
```bash
# PM2æ—¥å¿—
pm2 logs rag-system

# ç³»ç»Ÿæ—¥å¿—
sudo journalctl -u mongod
sudo journalctl -u redis-server
```

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

1. **åŠŸèƒ½æ‰©å±•**
   - æ·»åŠ é£ä¹¦æ–‡æ¡£é›†æˆ
   - æ”¯æŒæ›´å¤šæ–‡ä»¶æ ¼å¼
   - å¢å¼ºæœç´¢ç®—æ³•

2. **æ€§èƒ½ä¼˜åŒ–**
   - æ·»åŠ ç¼“å­˜å±‚
   - ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
   - å®ç°åˆ†é¡µåŠŸèƒ½

3. **å®‰å…¨åŠ å›º**
   - æ·»åŠ ç”¨æˆ·è®¤è¯
   - å®ç°è®¿é—®æ§åˆ¶
   - æ•°æ®åŠ å¯†å­˜å‚¨

4. **ç›‘æ§å‘Šè­¦**
   - ç³»ç»Ÿæ€§èƒ½ç›‘æ§
   - é”™è¯¯æ—¥å¿—å‘Šè­¦
   - ä½¿ç”¨ç»Ÿè®¡æŠ¥å‘Š

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æœåŠ¡å™¨æ—¥å¿—ï¼š`pm2 logs rag-system`
2. æ•°æ®åº“çŠ¶æ€ï¼š`sudo systemctl status mongod`
3. ç½‘ç»œè¿æ¥ï¼š`curl http://localhost:3000/health`
4. ç«¯å£å ç”¨ï¼š`sudo lsof -i :3000`

---

**æ­å–œï¼** ğŸ‰ ä½ çš„RAGç³»ç»Ÿç°åœ¨å·²ç»å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥éƒ¨ç½²åˆ°æœåŠ¡å™¨å¹¶å¼€å§‹ä½¿ç”¨äº†ï¼ 