# 腾讯云数据库MySQL安全组配置指南

## 当前安全组配置
```
安全组: sg-askzjc3u | default
状态: 需要配置规则
```

## 需要配置的安全组规则

### 1. 开放MySQL端口 (3306)
```
协议: TCP
端口: 3306
来源: 0.0.0.0/0 (临时，后续改为具体IP)
描述: MySQL数据库访问
```

### 2. 添加CloudBase IP白名单
```
协议: TCP
端口: 3306
来源: CloudBase函数IP段
描述: CloudBase函数访问
```

### 3. 添加服务器IP白名单
```
协议: TCP
端口: 3306
来源: 你的服务器IP
描述: 服务器访问
```

## 配置步骤

### 第一步: 获取IP地址
```bash
# 获取CloudBase函数IP
curl -s https://api.ipify.org

# 获取你的服务器IP
ssh your-server "curl -s https://api.ipify.org"
```

### 第二步: 配置安全组规则
1. 点击"规则预览"
2. 点击"新建安全组"或编辑现有规则
3. 添加以下规则:

#### 规则1: MySQL端口
```
协议: TCP
端口: 3306
来源: 0.0.0.0/0 (临时)
描述: MySQL数据库访问
```

#### 规则2: CloudBase访问
```
协议: TCP
端口: 3306
来源: [CloudBase函数IP]/32
描述: CloudBase函数访问
```

#### 规则3: 服务器访问
```
协议: TCP
端口: 3306
来源: [你的服务器IP]/32
描述: 服务器访问
```

### 第三步: 验证配置
```bash
# 测试连接
mysql -h [数据库IP] -P 3306 -u root -p
```

## 安全建议

### 临时配置 (开发阶段)
```
来源: 0.0.0.0/0
说明: 允许所有IP访问，仅用于开发测试
```

### 生产配置 (正式环境)
```
来源: [具体IP地址]/32
说明: 只允许特定IP访问，提高安全性
```

## 配置检查清单

- [ ] 开放3306端口
- [ ] 添加CloudBase IP白名单
- [ ] 添加服务器IP白名单
- [ ] 验证连接正常
- [ ] 测试数据库操作

## 注意事项

1. **开发阶段**: 可以临时开放0.0.0.0/0，方便测试
2. **生产环境**: 必须限制为具体IP地址
3. **定期检查**: 定期审查安全组规则
4. **监控告警**: 设置异常访问告警 